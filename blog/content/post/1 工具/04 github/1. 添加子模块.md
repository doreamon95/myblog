---
title: "Git 子模块 git submodule"
tags: ["submodule"]
categories: ["github"]
date: "2020-02-21T21:00:00+08:00"
url: "/2020/2/21/github-git-submodule.html"
---

****

## 前提说明

应用场景：一个Git仓库中添加其他Git仓库的场景

使用 Git 的 `git submodule` 命令为一个 `git 项目` 添加 `子git项目`

## 添加子模块

进入到项目根目录，使用如下命令添加

```
# 克隆你的主仓库
git clone yourrepository
cd  yourproject

# 添加子模块
git submodule add https://github.com/username/repositoryname.git
```

执行命令后会自动生成`.gitmodules`文件，保存项目 URL 与已经拉取的本地目录之间的映射，有多个子模块则含有多条记录，会随着版本控制一起被拉去和推送的，包含

```
[submodule "repositoryname"]
	path = repositoryname
	url = https://github.com/username/repositoryname.git
```

## 提交子模块到主目录

使用`git commit`进行提交，如下

```
git commit -m "add submodules"
```

## 更新子模块

子模块一般会单独开发，更新命令如下：

```
cd repositoryname/
git fetch
git merge origin/master
```

或者在主目录下更新

```
git submodule update --remote repositoryname
```

## 删除子模块

删除版本控制中

```
git rm --cached repositoryname  # 不带 --cached本地和版本控制中都删除
```

删除.gitmodules中

```
vim .gitmodules

# 删除与repositoryname有关内容
```

删除config配置中

